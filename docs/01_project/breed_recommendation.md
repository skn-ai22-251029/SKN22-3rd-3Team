# 고양이 품종 추천 정책 (Breed Recommendation Policy)

이 문서는 ZIPSA 서비스에서 사용자의 질문과 프로필을 바탕으로 최적의 고양이 품종을 추천하기 위한 공식 정책을 정의합니다. 매치메이커(Matchmaker) LLM은 이 가이드라인을 바탕으로 추천 순위를 결정합니다.

## 1. 데이터 매핑 정책 (Mapping Rules)

자연어 선호도를 데이터베이스의 수치(1-5)와 매칭할 때의 기준입니다.

| 항목 | 기준 키워드 | 목표 수치 | 비고 |
| :--- | :--- | :--- | :--- |
| **털 빠짐 (Shedding)** | 털 안 빠지는, 알레르기 케어 | `<= 2` (Low) | 낮을수록 적게 빠짐 |
| **활동량 (Energy)** | 얌전한, 조용한, 느긋한 | `<= 2` (Calm) | |
| | 활발한, 우다다, 에너지 넘치는 | `>= 4` (Active) | |
| **울음소리 (Vocal)** | 안 우는, 조용한, 아파트용 | `<= 2` (Quiet) | 낮을수록 조용함 |
| **애교 (Affection)** | 애교 있는, 개냥이, 껌딱지 | `>= 4` (High) | |
| **지능 (Intelligence)**| 똑똑한, 훈련 가능한, 영리한 | `>= 4` (High) | |

## 2. 에이전틱 필터링 우선순위

리트리버가 추출한 10개의 후보군 중 최종 3개를 선정할 때 LLM이 준수해야 할 우선순위입니다.

1.  **안전성 및 제약 조건 (Priority: Critical)**
    *   **알레르기**: 사용자가 알레르기가 있는 경우, `hypoallergenic: 1`인 품종을 최우선으로 배치한다.
    *   **동거인**: 어린 아이나 강아지가 있는 경우, 해당 친화도(`child_friendly`, `dog_friendly`)가 4 이상인 품종을 우선한다.
2.  **주거 환경 매칭 (Priority: High)**
    *   아파트 거주 시 활동량이 너무 높거나(`energy: 5`) 울음소리가 큰 품종은 후순위로 조정한다.
3.  **사용자 질문 강조 사항 (Priority: Medium)**
    *   사용자가 질문에서 직접적으로 언급한 특징(예: "무릎냥이가 좋아요")을 가장 잘 만족하는 품종을 선정한다.

## 3. 관리 가이드

*   이 정책은 `src/agents/matchmaker.py`의 프롬프트와 동기화되어야 합니다.
*   새로운 품종 데이터가 추가되거나 스키마가 변경될 경우 이 문서를 가장 먼저 업데이트합니다.
